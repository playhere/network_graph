## 项目背景

银行流水文件（CSV）记录了账户之间的转账往来。通过可交互的网络图，风控、反欺诈或数据分析人员可以快速识别可疑资金链、黑名单关联账户等。本工具旨在提供一款 Web 版可视化平台，让用户输入任意账户 ID，即刻高亮显示该账户与其他账户的转账关系。

## 目标

* 支持上传或接入标准化银行流水数据集，自动抽取“节点-边”结构

* 在浏览器端呈现可交互的网络图，节点为账户、边为交易

* 用户输入账户号码后，突出显示与之直接或间接（可选层级）往来的所有节点与边

* 提供筛选、搜索、导出等辅助功能，以便数据审计及报告生成

## 术语定义

| 术语       | 含义                          |
| -------- | --------------------------- |
| 节点（Node） | 唯一账户（银行账号或编码）               |
| 边（Edge）  | 一次转账记录，方向由付款方指向收款方          |
| 交易金额阈值   | 用户可设定的最小金额，用于过滤小额噪声交易       |
| 跳数（Hop）  | 从目标账户开始计算的路径层级（1 hop=直接交易方） |

## 功能需求

### 1. 数据接口与管理

* 支持单文件或批量 CSV 上传（字段示例：“凭证类型, 凭证号码, 交易时间, 摘要, 交易金额, 账户余额, 现转标志, 交易渠道, 交易机构, 对方户名/账号, 对方行名”）

* 支持通过 REST API 直接接入内部流水数据库或数据仓库

* 后端将流水数据转换为节点-边模型并存储（建议使用图数据库，例如 Neo4j 或 TigerGraph；若数据量中等，可用关系型数据库配合图算法库处理）

* 提供数据去重、字段映射和数据质量校验机制

### 2. 网络图渲染与交互

* 采用 D3.js、Cytoscape.js、Sigma.js 等前端图形库实现力导向布局、层次布局等多种视图

* 支持节点/边颜色、粗细、箭头方向、标签文字等样式配置

* 鼠标悬停显示账户详情（账户名、总入账金额、总出账金额、交易次数等）

* 双击或点击节点可展开/折叠其相邻节点，支持动态加载避免一次性渲染海量数据

* 支持缩放、拖拽、框选、截图导出 PNG/SVG 等交互

### 3. 账户查询与高亮

* 页面顶部提供账户号码搜索框，支持自动补全或模糊匹配

* 搜索后：

  * 目标节点放大并高亮（如红色描边 + 闪烁）

  * 其 N 跳范围（用户可选 1-3 跳）内的节点与边以较高饱和度/不透明度展示；其余元素降至淡色或灰度

  * 若无匹配节点，提示“未找到该账户”

* 提供“仅显示高亮子图”开关，方便聚焦分析

### 4. 过滤与分析

* 金额阈值过滤：仅展示大于指定金额的转账边

* 时间范围过滤：按日期区间重载网络图

* 交易方向过滤：仅看入账、仅看出账或双向

* 支持简单指标统计面板（节点度数、流入/流出总额、最大交易对等）

* 预留图算法扩展接口（例如最短路径、社群检测、PageRank、异常检测）


